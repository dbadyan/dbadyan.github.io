{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/actions.js","webpack:///./src/index.js","webpack:///./src/initialState.js","webpack:///./src/reducers.js","webpack:///./src/store.js","webpack:///./src/ui.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsC;;AAE/B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,0DAAQ,kCAAkC,qDAAqD;AAC3G,YAAY,0DAAQ,mBAAmB,8CAA8C;AACrF;AACA;AACO;A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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { doAction } from './reducers';\n\nexport function changePlayerHP(state, hpDelta) {\n    const newHP = Math.min(state.player.maxHP, Math.max(0, state.player.hp + hpDelta));\n    return {\n        ...state,\n        player: {\n            ...state.player,\n            hp: newHP\n        }\n    }\n}\n\nexport function giveThisManACookie(state, gold) {\n    return {\n        ...state,\n        player: {\n            ...state.player,\n            gold: state.player.gold + gold\n        }\n    }\n}\n\nexport function levelUp(state) {\n    return {\n        ...state,\n        player: {\n            ...state.player,\n            level: state.player.level + 1,\n            expToNextLevel: state.player.expToNextLevel + (state.player.level * 300)\n        }\n    }\n}\n\nexport function rewardExp(state, exp) {\n    while (state.player.expToNextLevel <= exp + state.player.exp) {\n        state = doAction(\"level-up\", state);\n    }\n    return {\n        ...state,\n        player: {\n            ...state.player,\n            exp: state.player.exp + exp,\n        }\n    }\n}\n\nexport function changeEnemyHP(state, adventureIndex, hpDelta) {\n    const newAdventures = [...state.adventures];\n    newAdventures[adventureIndex] = {\n        ...state.adventures[adventureIndex],\n        enemy: {\n            ...state.adventures[adventureIndex].enemy,\n            hp: state.adventures[adventureIndex].enemy.hp + hpDelta\n        }\n    }\n\n    return {\n        ...state,\n        adventures: newAdventures\n    }\n}\n\nexport function sendAdventurerToAdventure(state, adventureIndex, adventurerIndex) {\n    const newAdventurers = [...state.party.adventurers];\n    newAdventurers[adventurerIndex] = {\n        ...newAdventurers[adventurerIndex],\n        currentQuest: adventureIndex\n    }\n\n    return {\n        ...state,\n        party: {\n            ...state.party,\n            adventurers: newAdventurers\n        }\n    }\n}\n\nexport function returnAdventurerFromAdventure(state, adventurerIndex) {\n    const newAdventurers = [...state.party.adventurers];\n    newAdventurers[adventurerIndex] = {\n        ...newAdventurers[adventurerIndex],\n        currentQuest: null\n    }\n\n    return {\n        ...state,\n        party: {\n            ...state.party,\n            adventurers: newAdventurers\n        }\n    }\n}\n\nexport function collectFromAdventure(state, adventureIndex) {\n    const newAdventures = [...state.adventures];\n\n    newAdventures[adventureIndex] = {\n        ...state.adventures[adventureIndex],\n        collectibles: state.adventures[adventureIndex].collectibles - 1\n    };\n\n    return {\n        ...state,\n        adventures: newAdventures\n    }\n}\n\nexport function resetAdventure(currentState, initialState, adventureIndex) {\n    const newAdventures = [...currentState.adventures];\n    newAdventures[adventureIndex] = {\n        ...initialState.adventures[adventureIndex]\n    }\n\n    return {\n        ...currentState,\n        adventures: newAdventures\n    }\n}\nexport function startQuest(state, adventureIndex) {\n    state = doAction(\"send-adventurer-to-adventure\", { adventureindex: adventureIndex, adventurerIndex: 0 });\n    state = doAction(\"perform-round\", { adventure: state.adventures[adventureIndex] });\n    return state;\n}\nexport function performRound(state, adventure) {\n    const adventureIndex = state.adventures.indexOf(adventure);\n    state = doAction(\"change-enemy-hp\", { adventureIndex: adventureIndex, hpDelta: -state.player.stats.strength });\n\n    if (isDead(state.adventures[adventureIndex].enemy)) {\n        state = doAction(\"give-this-man-a-cookie\", { gold: state.adventures[adventureIndex].rewards.gold });\n        state = doAction(\"reward-exp\", { exp: state.adventures[adventureIndex].rewards.exp });\n        state = doAction(\"reset-adventure\", { adventureIndex: adventureIndex });\n        console.log(\"enemy dead\");\n        state = doAction(\"return-adventurer-from-adventure\", { adventure: state.adventures[adventureIndex], adventurerIndex: 0 });\n        return state;\n    }\n\n    state = doAction(\"change-player-hp\", { hpDelta: -state.adventures[adventureIndex].enemy.damage });\n    if (isDead(state.player)) {\n        state = doAction(\"reset-adventure\", { adventureIndex: adventureIndex });\n        console.log(\"you dead\");\n        state = doAction(\"return-adventurer-from-adventure\", { adventure: state.adventures[adventureIndex], adventurerIndex: 0 });\n        return state;\n    }\n\n    state = doAction(\"collect-from-adventure\", { adventureIndex: adventureIndex });\n    if (isCollected(state.adventures[adventureIndex])) {\n        state = doAction(\"give-this-man-a-cookie\", { gold: state.adventures[adventureIndex].rewards.gold });\n        state = doAction(\"reward-exp\", { exp: state.adventures[adventureIndex].rewards.exp });\n        state = doAction(\"reset-adventure\", { adventureIndex: adventureIndex });\n        console.log(\"you got away\");\n        state = doAction(\"return-adventurer-from-adventure\", { adventure: state.adventures[adventureIndex], adventurerIndex: 0 });\n        return state;\n    }\n\n    setTimeout(() => doAction(\"perform-round\", { adventure: state.adventures[adventureIndex] }), 2000);\n\n    return state;\n}\n\nexport function startGame(state, initialState) {\n    let newState = JSON.parse(JSON.stringify(initialState))\n    newState.initialState = JSON.parse(JSON.stringify(initialState));\n    return newState;\n}\n\nfunction isCollected(adventure) {\n    return adventure.collectibles <= 0;\n}\n\nfunction isDead(character) {\n    return character.hp <= 0;\n}","import { initialState } from './initialState';\nimport { doAction } from './reducers';\nimport * as store from './store';\n\nfunction healPlayer() {\n    doAction(\"change-player-hp\", { hpDelta: store.getState().player.hpRegain });\n}\n\nsetInterval(healPlayer, 1000);\n\ndoAction(\"start-game\", { initialState: initialState });","export const initialState = {\n    player: {\n        maxHP: 100,\n        hp: 100,\n        gold: 100,\n        exp: 0,\n        expToNextLevel: 100,\n        level: 1,\n        hpRegain: 0.5,\n        isInAdventure: false,\n        stats: {\n            strength: 10,\n            agility: 5\n        }\n    },\n    party: {\n        adventurers: [\n            {\n                currentQuest: null,\n                name: \"pooper\",\n                stats: {\n                    strength: 5\n                },\n                price: 200\n            },\n            {\n                currentQuest: null,\n                name: \"butthole\",\n                stats: {\n                    strength: 5\n                },\n                price: 200\n            }\n        ]\n    },\n    adventures: [\n        {\n            description: \"fetch\",\n            collectibles: 3,\n            requiredLevel: 1,\n            rewards: {\n                gold: 5,\n                item: \"glove\",\n                exp: 100\n            },\n            enemy: {\n                name: \"orc\",\n                hp: 30,\n                damage: 10\n            }\n        },\n        {\n            description: \"more fetch\",\n            collectibles: 3,\n            requiredLevel: 2,\n            rewards: {\n                gold: 5,\n                item: \"glove\",\n                exp: 5000\n            },\n            enemy: {\n                name: \"orc\",\n                hp: 50,\n                damage: 20\n            }\n        }\n    ]\n};","import * as ui from './ui';\nimport * as actions from './actions';\nimport * as store from './store';\n\nexport function doAction(action, actionParams) {\n    let state = store.getState();\n\n    console.log(Array.from(arguments));\n\n    switch (action) {\n        case \"start-game\":\n            state = actions.startGame(state, actionParams.initialState);\n            break;\n        case \"change-enemy-hp\":\n            state = actions.changeEnemyHP(state, actionParams.adventureIndex, actionParams.hpDelta);\n            break;\n        case \"change-player-hp\":\n            state = actions.changePlayerHP(state, actionParams.hpDelta);\n            break;\n        case \"give-this-man-a-cookie\":\n            state = actions.giveThisManACookie(state, actionParams.gold);\n            break;\n        case \"collect-from-adventure\":\n            state = actions.collectFromAdventure(state, actionParams.adventureIndex)\n            break;\n        case \"reset-adventure\":\n            state = actions.resetAdventure(state, state.initialState, actionParams.adventureIndex);\n            break;\n        case \"reward-exp\":\n            state = actions.rewardExp(state, actionParams.exp);\n            break;\n        case \"level-up\":\n            state = actions.levelUp(state);\n            break;\n        case \"perform-round\":\n            state = actions.performRound(state, actionParams.adventure);\n            break;\n        case \"send-adventurer-to-adventure\":\n            state = actions.sendAdventurerToAdventure(state, actionParams.adventureIndex, actionParams.adventurerIndex);\n            break;\n        case \"return-adventurer-from-adventure\":\n            state = actions.returnAdventurerFromAdventure(state, actionParams.adventurerIndex);\n            break;\n        case \"start-quest\":\n            state = actions.startQuest(state,actionParams.adventureIndex);\n            break;\n    }\n\n    store.setState(state);\n\n    console.log(state);\n\n    ui.renderGame(state);\n\n    return state;\n}","let state = {};\n\nexport function getState() {\n    return state;\n}\n\nexport function setState(newState) {\n    state = newState;\n}","import { doAction } from './reducers';\n\nexport function renderGame(state) {\n    document.getElementById(\"player-data\").innerHTML = \"\";\n    document.getElementById(\"player-data\").appendChild(getPlayerElement(state));\n\n    document.getElementById(\"advantures-data\").innerHTML = \"\";\n    document.getElementById(\"advantures-data\").appendChild(getAdventuresElement(state));\n}\n\nfunction getPlayerElement(state) {\n    const playerContainer = document.createElement(\"div\");\n    playerContainer.innerHTML = `\n    <ul>\n        <li>\n            <span class=\"stat-name\">HP</span>:\n            <span id=\"player-hp\">${Math.ceil(state.player.hp)}</span>\n        </li>\n        <li>\n            <span class=\"stat-name\">exp</span>: \n            <span id=\"player-exp\">${state.player.exp}/${state.player.expToNextLevel}</span>\n        </li>\n        <li>\n            <span class=\"stat-name\">level</span>: \n            <span id=\"player-level\">${state.player.level}</span>\n        </li>\n        <li>\n            <span class=\"stat-name\">gold</span>: \n            <span id=\"player-gold\">${state.player.gold}</span>\n        </li>\n        <li>\n            <span class=\"stat-name\">strength</span>: \n            <span id=\"player-strength\">${state.player.stats.strength}</span>\n        </li>\n        <li>\n            <span class=\"stat-name\">agility</span>: \n            <span id=\"player-agility\">${state.player.stats.agility}</span>\n        </li>\n    </ul>`;\n    return playerContainer;\n\n}\n\nfunction getAdventureElement(state, adventure, whatToDoWhenClicked) {\n    const button = document.createElement(\"button\");\n    button.innerText = adventure.description;\n    button.onclick = whatToDoWhenClicked;\n    if (state.party.adventurers[0].currentQuest !== null) {\n        button.disabled = true;\n    }\n    const adventureContainer = document.createElement(\"div\");\n    adventureContainer.className = \"adventure-container\";\n    adventureContainer.innerHTML = `\n        Monster: ${adventure.enemy.name} (${adventure.enemy.hp} hp)<br />\n        Reward: ${adventure.rewards.gold} gold | ${adventure.rewards.exp} exp <br />\n    `;\n    adventureContainer.appendChild(button);\n\n    return adventureContainer;\n}\n\nfunction getAdventuresElement(state) {\n    const availableAdventures = getAvailableAdventures(state);\n    const buttons = availableAdventures.map(adventure => {\n        const adventureIndex = state.adventures.indexOf(adventure);\n        return getAdventureElement(state, adventure, () => doAction(\"start-quest\", { adventureIndex: adventureIndex }));\n    });\n    const buttonsContainer = document.createElement(\"div\");\n    buttons.forEach(button => buttonsContainer.appendChild(button));\n    return buttonsContainer;\n};\n\nfunction getAvailableAdventures(state) {\n    return state.adventures.filter(adventure => state.player.level >= adventure.requiredLevel)\n}"],"sourceRoot":""}